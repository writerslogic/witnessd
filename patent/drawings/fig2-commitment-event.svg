<svg xmlns="http://www.w3.org/2000/svg" width="900" height="600" viewBox="0 0 900 600">
  <style>
    .box { fill: none; stroke: #000; stroke-width: 2; }
    .label { font-family: Arial, sans-serif; font-size: 16px; }
    .small { font-family: Arial, sans-serif; font-size: 13px; }
    .arrow { stroke: #000; stroke-width: 2; marker-end: url(#arrow); }
  </style>
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="8" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L8,3 L0,6 Z" fill="#000" />
    </marker>
  </defs>

  <text x="20" y="28" class="label">Figure 2: Commitment Event (Buffer â†’ MMR)</text>

  <rect x="40" y="80" width="240" height="90" class="box" />
  <text x="60" y="115" class="label">Volatile Buffer</text>
  <text x="60" y="140" class="small">Signals + hashes</text>

  <rect x="330" y="80" width="240" height="90" class="box" />
  <text x="350" y="115" class="label">WAL (Durable)</text>
  <text x="350" y="140" class="small">HMAC + chain</text>

  <rect x="620" y="80" width="240" height="90" class="box" />
  <text x="640" y="115" class="label">Checkpoint</text>
  <text x="640" y="140" class="small">Snapshot + hash</text>

  <line x1="280" y1="125" x2="330" y2="125" class="arrow" />
  <line x1="570" y1="125" x2="620" y2="125" class="arrow" />

  <rect x="90" y="230" width="720" height="90" class="box" />
  <text x="110" y="265" class="label">CED Binding + Time-Lock</text>
  <text x="110" y="290" class="small">Bind environment hash; compute VDF or equivalent</text>

  <rect x="90" y="340" width="720" height="90" class="box" />
  <text x="110" y="375" class="label">Device/Behavior Binding + Key Ratchet</text>
  <text x="110" y="400" class="small">Jitter seal; PUF/TPM attest; sign with scoped key</text>

  <line x1="740" y1="170" x2="740" y2="230" class="arrow" />
  <line x1="740" y1="320" x2="740" y2="340" class="arrow" />

  <rect x="300" y="470" width="300" height="90" class="box" />
  <text x="325" y="505" class="label">MMR Append</text>
  <text x="325" y="530" class="small">Append-only evidence log</text>

  <line x1="450" y1="430" x2="450" y2="470" class="arrow" />
</svg>
